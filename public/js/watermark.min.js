!function(b,c){"object"==typeof exports&&"object"==typeof module?module.exports=c():"function"==typeof define&&define.amd?define([],c):"object"==typeof exports?exports.watermark=c():b.watermark=c()}(this,function(){return function(a){function c(d){if(b[d])return b[d].exports;var e=b[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,c),e.loaded=!0,e.exports}var b={};return c.m=a,c.c=b,c.p="",c(0)}([function(a,b,c){c(1),a.exports=c(2).default},function(a,b){"use strict";b.__esModule=!0,b.default=function(){},a.exports=b.default},function(a,b,c){"use strict";function l(a){return a&&a.__esModule?a:{default:a}}function m(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function o(a){return(0,i.extend)((0,i.clone)(n),a)}function p(a,b){var c=a.canvas,d=a.sources,f=(0,e.dataUrl)(c);return d.forEach(b.release),f}function q(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=arguments.length<=2||void 0===arguments[2]?null:arguments[2],e=o(b);return c||(c=(0,d.load)(a,e.init)),{dataUrl:function(c){var f=this.then(function(a){return(0,d.mapToCanvas)(a,k.default)}).then(function(a){return h.result(c,a)}).then(function(a){return p(a,k.default)});return q(a,e,f)},load:function(b,c){var f=this.then(function(a){return(0,d.load)([a].concat(b),c)});return q(b,e,f)},render:function(){var c=this.then(function(a){return(0,d.load)([a])});return q(a,e,c)},blob:function(c){var d=this.dataUrl(c).then(f.blob);return q(a,e,d)},image:function(c){var f=this.dataUrl(c).then(d.createImage);return q(a,e,f)},then:function(){for(var b=arguments.length,d=Array(b),e=0;e<b;e++)d[e]=arguments[e];return c.then.apply(c,d)}}}Object.defineProperty(b,"__esModule",{value:!0}),b.default=q;var d=c(3),e=c(5),f=c(6),g=c(7),h=m(g),i=c(10),j=c(11),k=l(j),n={init:function(){}};q.image=h.image,q.text=h.text,q.destroy=function(){return k.default.clear()}},function(a,b,c){"use strict";function e(a){return a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a}function f(a,b,c){a.onload=function(){return c(a)},a.src=b}function g(a){var b="undefined"==typeof a?"undefined":e(a);return"string"===b?i:a instanceof Image?d.identity:j}function h(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=g(e),h=f(e,b);c.push(h)}return Promise.all(c)}function i(a,b){var c=new Image;return"function"==typeof b&&b(c),new Promise(function(b){c.onload=function(){return b(c)},c.src=a})}function j(a){var b=new FileReader;return new Promise(function(c){var d=new Image;b.onloadend=function(){return f(d,b.result,c)},b.readAsDataURL(a)})}function k(a,b){var c=new Image;return"function"==typeof b&&(c.onload=b),c.src=a,c}function l(a,b){var c=b.getContext("2d");return b.width=a.width,b.height=a.height,c.drawImage(a,0,0),b}function m(a,b){var c=b.pop();return l(a,c)}function n(a,b){return a.map(function(a){return m(a,b)})}Object.defineProperty(b,"__esModule",{value:!0}),b.getLoader=g,b.load=h,b.loadUrl=i,b.loadFile=j,b.createImage=k,b.imageToCanvas=m,b.mapToCanvas=n;var d=c(4)},function(a,b){"use strict";function c(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return function(a){return b.reduce(function(a,b){return b.call(null,a)},a)}}function d(a){return a}Object.defineProperty(b,"__esModule",{value:!0}),b.sequence=c,b.identity=d},function(a,b){"use strict";function c(a){return a.toDataURL()}Object.defineProperty(b,"__esModule",{value:!0}),b.dataUrl=c},function(a,b,c){"use strict";function f(a){return e.exec(a).slice(1)}function g(a){return window.atob(a)}function h(a){for(var b=a.length,c=new Uint8Array(b),d=0;d<b;d++)c[d]=a.charCodeAt(d);return c}Object.defineProperty(b,"__esModule",{value:!0}),b.blob=void 0,b.split=f,b.decode=g,b.uint8=h;var d=c(4),e=/^data:([^;]+);base64,(.*)$/;b.blob=(0,d.sequence)(f,function(a){return[g(a[1]),a[0]]},function(a){return new Blob([h(a[0])],{type:a[1]})})},function(a,b,c){"use strict";function h(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function k(a,b){var c=a.apply(null,b);return{canvas:c,sources:b}}Object.defineProperty(b,"__esModule",{value:!0}),b.text=b.image=void 0,b.result=k;var d=c(8),e=h(d),f=c(9),g=h(f);b.image=e,b.text=g},function(a,b){"use strict";function c(a,b,c){return c||(c=1),function(d,e){var f=d.getContext("2d");return f.save(),f.globalAlpha=c,f.drawImage(e,a(d,e),b(d,e)),f.restore(),d}}function d(a){return c(function(a,b){return a.width-(b.width+10)},function(a,b){return a.height-(b.height+10)},a)}function e(a){return c(function(a,b){return a.width-(b.width+10)},function(a,b){return 10},a)}function f(a){return c(function(a,b){return 10},function(a,b){return a.height-(b.height+10)},a)}function g(a){return c(function(a,b){return 10},function(a,b){return 10},a)}function h(a){return c(function(a,b){return(a.width-b.width)/2},function(a,b){return(a.height-b.height)/2},a)}Object.defineProperty(b,"__esModule",{value:!0}),b.atPos=c,b.lowerRight=d,b.upperRight=e,b.lowerLeft=f,b.upperLeft=g,b.center=h},function(a,b){"use strict";function c(a,b,c,d,e,f){return f||(f=1),function(g){var h=g.getContext("2d");h.save(),h.globalAlpha=f,h.fillStyle=e,h.font=d;var i=h.measureText(c);return h.fillText(c,a(g,i,h),b(g,i,h)),h.restore(),g}}function d(a,b,d,e,f){return c(function(a,b){return a.width-(b.width+10)},function(a){return f||a.height-10},a,b,d,e)}function e(a,b,d,e,f){return c(function(){return 10},function(a){return f||a.height-10},a,b,d,e)}function f(a,b,d,e,f){return c(function(a,b){return a.width-(b.width+10)},function(){return f||20},a,b,d,e)}function g(a,b,d,e,f){return c(function(){return 10},function(){return f||20},a,b,d,e)}function h(a,b,d,e,f){return c(function(a,b,c){return c.textAlign="center",a.width/2},function(a,b,c){return c.textBaseline="middle",a.height/2},a,b,d,e)}Object.defineProperty(b,"__esModule",{value:!0}),b.atPos=c,b.lowerRight=d,b.lowerLeft=e,b.upperRight=f,b.upperLeft=g,b.center=h},function(a,b){"use strict";function c(a,b){var c=Object.keys(b);return c.forEach(function(c){return a[c]=b[c]}),a}function d(a){return c({},a)}Object.defineProperty(b,"__esModule",{value:!0}),b.extend=c,b.clone=d},function(a,b){"use strict";function c(){var a=[];return{pop:function(){return 0===this.length&&a.push(document.createElement("canvas")),a.pop()},get length(){return a.length},release:function(c){var d=c.getContext("2d");d.clearRect(0,0,c.width,c.height),a.push(c)},clear:function(){a.splice(0,a.length)},get elements(){return a}}}Object.defineProperty(b,"__esModule",{value:!0}),b.CanvasPool=c;var d=c();b.default=d}])});